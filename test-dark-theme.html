<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç —Ç–µ–º–Ω–æ–π —Ç–µ–º—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            margin: 0;
            transition: all 0.3s;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å–≤–µ—Ç–ª–æ–π —Ç–µ–º—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ –±—Ä–∞—É–∑–µ—Ä–µ) */
        body {
            background-color: #f5f5f5;
            color: #333;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è —Ç–µ–º–Ω–æ–π —Ç–µ–º—ã */
        body[data-theme="dark"] {
            background-color: #1a1a1a;
            color: #e0e0e0;
        }
        
        .status {
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border: 2px solid;
        }
        
        body[data-theme="dark"] .status {
            background-color: #2a2a2a;
            border-color: #4a4a4a;
        }
        
        button {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            margin: 10px;
        }
        
        .log {
            font-family: monospace;
            font-size: 14px;
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            max-height: 300px;
            overflow-y: auto;
        }
        
        body[data-theme="dark"] .log {
            background-color: #2a2a2a;
            border-color: #4a4a4a;
        }
    </style>
</head>
<body>
    <h1>–¢–µ—Å—Ç —Ç–µ–º–Ω–æ–π —Ç–µ–º—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é</h1>
    
    <div class="status">
        <h2>–°—Ç–∞—Ç—É—Å –ø—Ä–æ–≤–µ—Ä–∫–∏:</h2>
        <p>
            <strong>–¢–µ–∫—É—â–∞—è —Ç–µ–º–∞:</strong> <span id="current-theme">–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞</span><br>
            <strong>–°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–∞—è —Ç–µ–º–∞:</strong> <span id="saved-theme">–Ω–µ –Ω–∞–π–¥–µ–Ω–∞</span><br>
            <strong>–ê—Ç—Ä–∏–±—É—Ç body:</strong> <span id="body-theme">–Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω</span>
        </p>
    </div>
    
    <div>
        <button onclick="clearTheme()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é —Ç–µ–º—É</button>
        <button onclick="toggleTheme()">üåì –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É</button>
        <button onclick="reloadPage()">üîÑ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É</button>
    </div>
    
    <div class="log" id="log">
        <strong>–ñ—É—Ä–Ω–∞–ª —Å–æ–±—ã—Ç–∏–π:</strong><br>
    </div>
    
    <script>
        function log(message) {
            const logEl = document.getElementById('log');
            const time = new Date().toLocaleTimeString();
            logEl.innerHTML += `[${time}] ${message}<br>`;
            logEl.scrollTop = logEl.scrollHeight;
        }
        
        function updateStatus() {
            const savedTheme = localStorage.getItem('theme');
            const bodyTheme = document.body.getAttribute('data-theme');
            
            document.getElementById('saved-theme').textContent = savedTheme || '–Ω–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞';
            document.getElementById('body-theme').textContent = bodyTheme || '–Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω';
            document.getElementById('current-theme').textContent = bodyTheme || '–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞';
            
            log(`–û–±–Ω–æ–≤–ª–µ–Ω —Å—Ç–∞—Ç—É—Å: body="${bodyTheme}", localStorage="${savedTheme}"`);
        }
        
        function clearTheme() {
            localStorage.removeItem('theme');
            log('–°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–∞—è —Ç–µ–º–∞ —É–¥–∞–ª–µ–Ω–∞ –∏–∑ localStorage');
            updateStatus();
        }
        
        function toggleTheme() {
            const currentTheme = document.body.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            document.body.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            log(`–¢–µ–º–∞ –∏–∑–º–µ–Ω–µ–Ω–∞: ${currentTheme} ‚Üí ${newTheme}`);
            updateStatus();
        }
        
        function reloadPage() {
            window.location.reload();
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('DOMContentLoaded', () => {
            log('–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é —Ç–µ–º—É
            const savedTheme = localStorage.getItem('theme');
            log(`localStorage.theme = "${savedTheme}"`);
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–µ–∫—É—â–∏–π –∞—Ç—Ä–∏–±—É—Ç body
            const bodyTheme = document.body.getAttribute('data-theme');
            log(`body[data-theme] = "${bodyTheme}"`);
            
            // –ï—Å–ª–∏ —Ç–µ–º–∞ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–º–Ω—É—é –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            if (!bodyTheme) {
                log('–¢–µ–º–∞ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞, –ø—Ä–∏–º–µ–Ω—è–µ–º —Ç–µ–º–Ω—É—é —Ç–µ–º—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é');
                document.body.setAttribute('data-theme', savedTheme || 'dark');
            }
            
            updateStatus();
        });
    </script>
</body>
</html>