# üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û–ï –†–£–ö–û–í–û–î–°–¢–í–û –î–õ–Ø AI –ê–ì–ï–ù–¢–û–í - AGAPE WORSHIP

## üéØ –¶–ï–õ–¨ –î–û–ö–£–ú–ï–ù–¢–ê
–î–∞—Ç—å –Ω–æ–≤–æ–º—É AI –∞–≥–µ–Ω—Ç—É **–ü–û–õ–ù–û–ï** –ø–æ–Ω–∏–º–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –∑–∞ 5 –º–∏–Ω—É—Ç, –∏–∑–±–µ–∂–∞–≤ –≤—Å–µ—Ö –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º.

## üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê (–ö–†–ò–¢–ò–ß–ù–û!)

```
–ì–ò–ë–†–ò–î–ù–ê–Ø –°–ò–°–¢–ï–ú–ê = Legacy –∫–æ–¥ + –ù–æ–≤—ã–µ –º–æ–¥—É–ª–∏
‚îú‚îÄ‚îÄ Legacy (–ù–ï –¢–†–û–ì–ê–¢–¨ –±–µ–∑ –∫—Ä–∞–π–Ω–µ–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏!)
‚îÇ   ‚îú‚îÄ‚îÄ script.js (912 —Å—Ç—Ä–æ–∫) - –≥–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ ui.js (1551 —Å—Ç—Ä–æ–∫) - UI —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ firebase-init.js - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Firebase v8
‚îÇ
‚îî‚îÄ‚îÄ –ú–æ–¥—É–ª—å–Ω–∞—è (/src/modules/)
    ‚îú‚îÄ‚îÄ auth/ - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, —Ä–æ–ª–∏, —Å—Ç–∞—Ç—É—Å—ã
    ‚îú‚îÄ‚îÄ branches/ - —Ñ–∏–ª–∏–∞–ª—ã –∏ –∑–∞—è–≤–∫–∏
    ‚îú‚îÄ‚îÄ admin/ - –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
    ‚îî‚îÄ‚îÄ settings/ - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –§–ê–ô–õ–´ - –ù–ï –ü–ï–†–ï–ú–ï–©–ê–¢–¨!

1. **sw.js** - –î–û–õ–ñ–ï–ù –±—ã—Ç—å –≤ –∫–æ—Ä–Ω–µ (PWA —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ)
2. **ui.js** - –ù–ï –ø–µ—Ä–µ–º–µ—â–∞—Ç—å (—Å–ª–æ–º–∞–µ—Ç—Å—è –≤–µ—Å—å UI)
3. **script.js** - –ù–ï –ø–µ—Ä–µ–º–µ—â–∞—Ç—å (–≥–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä)
4. **firebase-init.js** - –ù–ï –º–µ–Ω—è—Ç—å (v8 —á–µ—Ä–µ–∑ CDN)
5. **firebase-v8-adapter.js** - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –∞–¥–∞–ø—Ç–µ—Ä –¥–ª—è v9 —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞

## üî• FIREBASE - –¢–û–õ–¨–ö–û v8!

```javascript
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û (v8):
const snapshot = await docRef.get();
if (snapshot.exists) { // –ù–ï exists()!
    const data = snapshot.data();
}

// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û (v9):
if (snapshot.exists()) // –û–®–ò–ë–ö–ê!
```

**–í–ê–ñ–ù–û**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Firebase v8.10.0 —á–µ—Ä–µ–∑ CDN. –ù–ï –ú–ï–ù–Ø–¢–¨ –í–ï–†–°–ò–Æ!

## üë§ –ü–†–ï–î–ü–û–ß–¢–ï–ù–ò–Ø –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø (–∏–∑ memories)

1. **–ù–ï –∫–æ–º–º–∏—Ç–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—á–µ—Ç —Å–∞–º –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω–æ
2. **–î–∞–≤–∞—Ç—å –ø–æ—à–∞–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏** - —á—Ç–æ –¥–µ–ª–∞—Ç—å, –∫–∞–∫, –∑–∞—á–µ–º
3. **–ü–∏—Å–∞—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ø–ª–∞–Ω—ã** –ø–µ—Ä–µ–¥ –±–æ–ª—å—à–∏–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏
4. **–ú–∏–Ω–∏–º—É–º emoji** –≤ —Ç–µ–∫—Å—Ç–µ - –æ—Ç–≤–ª–µ–∫–∞—é—Ç
5. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–µ—Ç–∫—É main** –¥–ª—è GitHub Pages (–Ω–µ masters)
6. **–í–µ–∂–ª–∏–≤—ã–µ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏** –≤ —Å—Ç–∏–ª–µ –ø–æ–¥—Å–∫–∞–∑–æ–∫

## üéØ –¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï –ü–†–û–ï–ö–¢–ê

### –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π –∏ —Å—Ç–∞—Ç—É—Å–æ–≤:
- **–†–æ–ª–∏**: `admin`, `user`, `guest`
- **–°—Ç–∞—Ç—É—Å—ã**: `active`, `pending`, `blocked`
- **–ù–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞—é—Ç `pending`
- **–û—Å–Ω–æ–≤–∞—Ç–µ–ª—å**: –Ω–µ–∏–∑–º–µ–Ω—è–µ–º–∞—è —Ä–æ–ª—å, –∑–∞—â–∏—â–µ–Ω –æ—Ç —É–¥–∞–ª–µ–Ω–∏—è

### –§–∏–ª–∏–∞–ª—ã (branches):
- –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∏–ª–∏–∞–ª: `branchId`
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ: `additionalBranchIds[]`
- –°–µ–ª–µ–∫—Ç–æ—Ä —Ñ–∏–ª–∏–∞–ª–æ–≤ –≤ –ø–∞–Ω–µ–ª–∏ —Å–µ—Ç–ª–∏—Å—Ç–æ–≤
- –°–∏—Å—Ç–µ–º–∞ –∑–∞—è–≤–æ–∫ –Ω–∞ —Å–º–µ–Ω—É/–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–ª—è pending:
- ‚ùå –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ç–ª–∏—Å—Ç–æ–≤
- ‚ùå –£–¥–∞–ª–µ–Ω–∏–µ —Å–µ—Ç–ª–∏—Å—Ç–æ–≤
- ‚ùå –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –ø–µ—Å–µ–Ω
- ‚ùå –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏–π
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

### UI/UX:
- **–§–æ–Ω**: #111827 (—Ç–µ–º–Ω–∞—è —Ç–µ–º–∞)
- **–®—Ä–∏—Ñ—Ç**: Montserrat –≤–µ–∑–¥–µ, –ö–†–û–ú–ï —Ç–µ–∫—Å—Ç–∞ –ø–µ—Å–µ–Ω (–º–æ–Ω–æ—à–∏—Ä–∏–Ω–Ω—ã–π)
- **PWA**: Service Worker v47
- **–¢–µ–º—ã**: —Ç–µ–º–Ω–∞—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

## üêõ –ò–ó–í–ï–°–¢–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ –ò –†–ï–®–ï–ù–ò–Ø

### 1. "Cannot find module"
**–ü—Ä–∏—á–∏–Ω–∞**: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å –ø–æ—Å–ª–µ —Ä–µ–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å actual path, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ../

### 2. "doc.exists is not a function"
**–ü—Ä–∏—á–∏–Ω–∞**: v9 —Å–∏–Ω—Ç–∞–∫—Å–∏—Å —Å v8 Firebase
**–†–µ—à–µ–Ω–∏–µ**: `.exists` –≤–º–µ—Å—Ç–æ `.exists()`

### 3. "404 –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ"
**–ü—Ä–∏—á–∏–Ω–∞**: –ù–µ –æ–±–Ω–æ–≤–ª–µ–Ω Service Worker
**–†–µ—à–µ–Ω–∏–µ**: –£–≤–µ–ª–∏—á–∏—Ç—å –≤–µ—Ä—Å–∏—é –≤ sw.js

### 4. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–æ–≤
**–ü—Ä–∏—á–∏–Ω–∞**: –ü–µ—Ä–µ—Ö–æ–¥–Ω—ã–π –ø–µ—Ä–∏–æ–¥ Legacy ‚Üí –ú–æ–¥—É–ª–∏
**–†–µ—à–µ–Ω–∏–µ**: –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –Ω–µ —Ç—Ä–æ–≥–∞—Ç—å

## ‚ùå –ß–ï–ì–û –ù–ï –î–ï–õ–ê–¢–¨

1. **–ù–ï –º–µ–Ω—è—Ç—å –≤–µ—Ä—Å–∏—é Firebase** (—Å–ª–æ–º–∞–µ—Ç—Å—è –≤—Å—ë)
2. **–ù–ï –ø–µ—Ä–µ–º–µ—â–∞—Ç—å –∫–æ—Ä–Ω–µ–≤—ã–µ —Ñ–∞–π–ª—ã** (ui.js, script.js)
3. **–ù–ï —É–¥–∞–ª—è—Ç—å HTML-—Ä–µ–¥–∏—Ä–µ–∫—Ç—ã** –≤ –∫–æ—Ä–Ω–µ
4. **–ù–ï —Ç—Ä–æ–≥–∞—Ç—å legacy –∫–æ–¥** –±–µ–∑ –∫—Ä–∞–π–Ω–µ–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
5. **–ù–ï –∫–æ–º–º–∏—Ç–∏—Ç—å –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
6. **–ù–ï —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤–µ—Ç–∫—É masters** (—Ç–æ–ª—å–∫–æ main)
7. **–ù–ï –º–µ–Ω—è—Ç—å –º–æ–Ω–æ—à–∏—Ä–∏–Ω–Ω—ã–π —à—Ä–∏—Ñ—Ç** –¥–ª—è –ø–µ—Å–µ–Ω

## üöÄ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö:
1. –û–±–Ω–æ–≤–∏—Ç—å Service Worker –≤–µ—Ä—Å–∏—é
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –∏–º–ø–æ—Ä—Ç—ã
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ tool calls
4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –ù–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
- –°–æ–∑–¥–∞–≤–∞—Ç—å –≤ `/src/modules/`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å firebase-v8-adapter
- –°–ª–µ–¥–æ–≤–∞—Ç—å –º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ

### –ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö:
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é Firebase (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å v8)
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—É—Ç–∏ –∏–º–ø–æ—Ä—Ç–æ–≤
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `.exists` vs `.exists()`
4. –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à (Service Worker)

## üìä –°–¢–†–£–ö–¢–£–†–ê –ë–î FIRESTORE

```
users/
‚îú‚îÄ‚îÄ uid
‚îú‚îÄ‚îÄ email/phone
‚îú‚îÄ‚îÄ name
‚îú‚îÄ‚îÄ role: admin|user|guest
‚îú‚îÄ‚îÄ status: active|pending|blocked
‚îú‚îÄ‚îÄ branchId: –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∏–ª–∏–∞–ª
‚îú‚îÄ‚îÄ additionalBranchIds: []
‚îî‚îÄ‚îÄ createdAt, approvedAt, etc.

branches/
‚îú‚îÄ‚îÄ name
‚îú‚îÄ‚îÄ address
‚îú‚îÄ‚îÄ createdBy
‚îî‚îÄ‚îÄ createdAt

worship_setlists/
‚îú‚îÄ‚îÄ name
‚îú‚îÄ‚îÄ songs: []
‚îú‚îÄ‚îÄ branchId
‚îú‚îÄ‚îÄ createdBy
‚îî‚îÄ‚îÄ createdAt

songs/
‚îú‚îÄ‚îÄ name (id –ø–µ—Å–Ω–∏)
‚îú‚îÄ‚îÄ text
‚îú‚îÄ‚îÄ originalKey
‚îú‚îÄ‚îÄ sheet (–∫–∞—Ç–µ–≥–æ—Ä–∏—è)
‚îî‚îÄ‚îÄ youtubeLink
```

## üîç –ü–û–õ–ï–ó–ù–´–ï –ö–û–ú–ê–ù–î–´

```bash
# –ù–∞–π—Ç–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
grep -r "functionName" --include="*.js"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã —Ñ–∞–π–ª–∞
grep -r "from.*filename" --include="*.js"

# –ù–∞–π—Ç–∏ –≤—Å–µ TODO
grep -r "TODO" --include="*.js"
```

## üí° –ì–õ–ê–í–ù–´–ô –°–û–í–ï–¢

**–ù–∞—á–Ω–∏ —Å —á—Ç–µ–Ω–∏—è —ç—Ç–æ–≥–æ —Ñ–∞–π–ª–∞, –∑–∞—Ç–µ–º AI_AGENT_GUIDE.md –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.**
–ï—Å–ª–∏ —Å–æ–º–Ω–µ–≤–∞–µ—à—å—Å—è - —Å–ø—Ä–æ—Å–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –Ω–µ –¥–µ–ª–∞–π –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–π.
–ü–æ–º–Ω–∏ –æ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ù–ï –Ω–∞—Ä—É—à–∞–π –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞.

---
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: –Ø–Ω–≤–∞—Ä—å 2025
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å**: –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–ê–Ø