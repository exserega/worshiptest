# Firebase Firestore Indexes

## Необходимые индексы для корректной работы приложения

### 1. Индекс для сетлистов с филиалами

Для оптимальной работы фильтрации сетлистов по филиалам рекомендуется создать следующие составные индексы:

**Коллекция:** `worship_setlists`

#### Индекс 1: Для пользователей с филиалом
- **Поля:**
  - `branchId` (Ascending)
  - `createdAt` (Descending)

#### Индекс 2: Для пользователей без филиала
- **Поля:**
  - `branchId` (Ascending) 
  - `createdAt` (Descending)

### Как создать индексы:

1. Перейдите в [Firebase Console](https://console.firebase.google.com)
2. Выберите проект `song-archive-389a6`
3. Перейдите в Firestore Database → Indexes
4. Нажмите "Create Index"
5. Выберите коллекцию `worship_setlists`
6. Добавьте поля как указано выше
7. Нажмите "Create"

### 2. Индекс для событий с филиалами ⚠️ КРИТИЧНО!

**Коллекция:** `events`

#### Индекс для фильтрации событий по филиалу:
- **Поля:**
  - `branchId` (Ascending)
  - `date` (Descending)
- **Область запроса:** Коллекция
- **Примечание:** Обязательный для работы событий!

### 3. Индекс для пользователей по статусу (для участников)

**Коллекция:** `users`

#### Индекс для получения активных пользователей филиала:
- **Поля:**
  - `branchId` (Ascending)
  - `status` (Ascending)
- **Область запроса:** Коллекция
- **Примечание:** Используется для выбора участников событий

### Альтернативный способ:

Просто попробуйте загрузить сетлисты или события в приложении. Firebase автоматически предложит создать нужный индекс и даст прямую ссылку.

## Примечание

В текущей версии кода сортировка выполняется в JavaScript, поэтому индексы не обязательны для работы приложения, но рекомендуются для оптимизации производительности при большом количестве сетлистов.